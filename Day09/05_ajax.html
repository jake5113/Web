<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>JS AJAX</title>

    <!-- ajax 는 웹서버 환경에서만 동작함. http로 시작하는 웹주소에서만 동작함 -->
    <script>

        function aaa() {
            // GET 방식으로 서버로부터 응답을 요청하기
            
            var xhr = new XMLHttpRequest()

            // 서버로부터 응답 받으면 자동으로 발동하는 콜백함수 등록
            xhr.onreadystatechange = function(){
                // readyState : 4 - 서버 응답이 완료된 상태값.
                // status - 서버의 응답코드 [200 - OK , 404 - 파일없음]
                if(xhr.readyState == 4 && xhr.status == 200){
                    var e = document.getElementById('target')
                    e.innerHTML = xhr.responseText
                }
            }

            // xhr.open('GET', './aaa.txt', true) // 세번째 파라미터 true : 비동기 동작 여부
            // xhr.open('GET', './04_noAjax.html', true)
            // xhr.open('GET', './getTest.php?name=SAM&msg=Good', true)
            // 만약 다른 서버와 통신하고 싶다면? 예. OPEN API 데이터 구현 - 영화진흥위원회, 기상청정보 ..
            // xhr.open('GET', 'https://www.w3schools.com/XML/cd_catalog.xml', true)

            xhr.send()

        }
        function bbb() {
            var xhr = new XMLHttpRequest()
            xhr.onreadystatechange = function(){
                if(xhr.readyState == 4 && xhr.status == 200){
                    document.getElementById('target').innerHTML = xhr.responseText
                }
            }

            xhr.open('POST', './postTest.php', true)

            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
            xhr.send('title=Hello&msg=Nice to meet you')
        }

    </script>

</head>

<body>
    <p>
        <button onclick="aaa()">GET</button>
        <button onclick="bbb()">POST</button>
    </p>

    <hr>

    <!-- 서버의 응답결과를 보여주는 영역 요소 -->
    <div id="target"></div>
</body>

</html>